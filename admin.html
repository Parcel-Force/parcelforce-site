<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ParcelForce Admin Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      padding: 20px;
      background: #f4f4f4;
      color: #222;
    }
    .form-section, .dashboard-section {
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      max-width: 900px;
      margin: 20px auto;
      box-shadow: 0 0 10px rgba(0,0,0,0.05);
    }
    .form-group {
      margin-bottom: 15px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }
    input, select, textarea {
      width: 100%;
      padding: 10px;
      border-radius: 5px;
      border: 1px solid #ccc;
      font-size: 1em;
      box-sizing: border-box;
    }
    input.half, select.half { width: calc(50% - 5px); }
    button {
      padding: 10px 15px;
      background-color: #0078D4;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin-right: 10px;
    }
    button:hover { background-color: #005A9E; }
    #feedback { margin-top: 10px; font-weight: bold; color: #2c3e50; }
    #loading { display:none; margin-top:10px; color:#555; }
    .section-title { margin-bottom: 10px; color: #2c3e50; font-weight:700; }
    .parcel-entry {
      background: #f9f9f9;
      padding: 12px;
      margin-bottom: 10px;
      border-radius: 5px;
      border-left: 4px solid #0078D4;
      display:flex;
      justify-content:space-between;
      gap:12px;
      align-items:flex-start;
    }
    .parcel-entry .meta { flex:1; }
    .parcel-entry .actions { display:flex; gap:8px; align-items:center; }
    .small-btn { padding:6px 10px; font-size:0.9rem; background:#666; }
    .small-btn.danger { background:#c8102e; }
    .timestamp { color:#777; font-size:0.9rem; }
    @media (max-width:700px) {
      input.half, select.half { width:100%; }
      .form-group { flex-direction:column; }
      .parcel-entry { flex-direction:column; align-items:stretch; }
    }
    .sr-only { position:absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden; }
  </style>
</head>
<body>
  <div id="header"></div>

  <main>
    <header style="text-align:center; margin-bottom:20px;">
      <h1 style="color:#d32f2f;">ðŸ“¦ ParcelForce Admin Panel</h1>
      <p>Manage and update parcel tracking data (local/demo mode).</p>
    </header>

    <div class="dashboard-section" aria-live="polite" aria-atomic="true">
      <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;">
        <h2 class="section-title">Submitted Parcels</h2>
        <div>
          <button type="button" id="refreshBtn">ðŸ”„ Refresh List</button>
          <button type="button" id="clearAllBtn" class="small-btn danger">ðŸ§¹ Clear All</button>
        </div>
      </div>
      <div id="parcelList" style="margin-top: 16px;"></div>
      <p id="loading" aria-hidden="true">Loading...</p>
    </div>

    <div class="form-section" aria-labelledby="addParcelTitle">
      <h2 id="addParcelTitle" class="section-title">Add or Update Parcel</h2>

      <form id="parcelForm" novalidate>
        <div class="form-group">
          <input type="text" id="trackingNumber" placeholder="Tracking Number" required class="half" aria-label="Tracking Number" />
          <select id="parcelStatus" class="half" aria-label="Parcel Status">
            <option value="Picked Up">Picked Up</option>
            <option value="In Transit">In Transit</option>
            <option value="Out for Delivery">Out for Delivery</option>
            <option value="Delivered">Delivered</option>
          </select>
        </div>

        <div class="form-group">
          <input type="text" id="sender" placeholder="Sender Name" required aria-label="Sender name" />
          <input type="text" id="receiver" placeholder="Receiver Name" required aria-label="Receiver name" />
        </div>

        <div class="form-group">
          <input type="text" id="address" placeholder="Delivery Address" aria-label="Delivery address" />
        </div>

        <div class="form-group">
          <input type="text" id="phone" placeholder="Phone Number" aria-label="Phone number" class="half" />
          <input type="email" id="email" placeholder="Email Address" aria-label="Email address" class="half" />
        </div>

        <div class="form-group">
          <input type="number" id="deliveryFee" placeholder="Delivery Fee" aria-label="Delivery fee" class="half" />
          <input type="date" id="estimatedDelivery" placeholder="Estimated Delivery Date" aria-label="Estimated delivery date" class="half" />
        </div>

        <div class="form-group">
          <label for="status">Status updates (one per line)</label>
        </div>
        <div class="form-group">
          <textarea id="status" placeholder="timestamp | location | status | details (one per line)" aria-label="Status updates" style="min-height:100px;width:100%;"></textarea>
        </div>

        <div class="form-group">
          <input type="text" id="latitude" placeholder="Latitude (e.g. -26.2041)" aria-label="Latitude" class="half" />
          <input type="text" id="longitude" placeholder="Longitude (e.g. 28.0473)" aria-label="Longitude" class="half" />
        </div>

        <input type="hidden" id="lastUpdated" />
        <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:8px;">
          <button type="submit" id="submitBtn">Submit Parcel</button>
          <button type="reset" id="clearBtn" type="button">Clear Form</button>
        </div>
      </form>
      <p id="feedback" role="status" aria-live="polite"></p>
    </div>
  </main>

  <div id="footer"></div>

  <script type="module" src="admin.js"></script>

  <script>
    async function loadLayout() {
      try {
        const [headerRes, footerRes] = await Promise.all([
          fetch('header.html').then(r => r.ok ? r.text() : ''),
          fetch('footer.html').then(r => r.ok ? r.text() : '')
        ]);
        if (headerRes) document.getElementById('header').innerHTML = headerRes;
        if (footerRes) document.getElementById('footer').innerHTML = footerRes;
      } catch (e) {
        console.warn('Layout include failed', e);
      }
    }
    loadLayout();
  </script>
</body>
</html>